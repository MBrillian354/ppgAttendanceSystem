import{j as e,b as d,r as c,A as h,L as u}from"./index-p3Hu8WjZ.js";import{u as g}from"./http-hook-Bc_7FVas.js";import{L as p,C as j,a as f}from"./lock-CQcgLl7g.js";import{G as N}from"./graduation-cap-BMF7yQW3.js";import{U as y}from"./users-DSZ-cjza.js";import{I as b}from"./InfoCard-JUnLsys4.js";import"./createLucideIcon-_SAVRkLg.js";const v=({data:r})=>{const n=s=>{const[t,a]=s.split(":");return new Date(0,0,0,t,a).toLocaleTimeString("id-ID",{hour:"numeric",minute:"numeric",hour12:!1})};return e.jsx("div",{className:"p-4 bg-gray-50 min-h-screen",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.classes.map(s=>{var a,i;if((i=(a=s==null?void 0:s.teachingGroupYearId)==null?void 0:a.academicYearId)==null?void 0:i.isActive)return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-all duration-200 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:s.name}),s.isLocked&&e.jsx("span",{className:"inline-flex items-center p-2 rounded-full text-xs font-medium bg-green-200 text-green-700",children:e.jsx(p,{size:16})})]})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"text-sm",children:["Mulai Kelas ",n(s.startTime)]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"text-sm",children:[s.teachers.length," Guru"]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),e.jsxs("span",{className:"text-sm",children:[s.students.length," Siswa"]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(f,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:`${s.attendances.length/s.students.length} / (targer semester) Pertemuan Terlaksana`})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-100",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{to:`/dashboard/classes/${s._id}`,className:"grow",children:e.jsx("button",{className:"btn-mobile-primary-round w-full",children:"Detail Kelas"})}),e.jsx(d,{to:`/attendance/history/class/${s._id}`,className:"grow",children:e.jsx("button",{className:"btn-mobile-primary-round w-full",children:"Riwayat Absensi"})})]})})]},s._id)})})})})},E=()=>{const[r,n]=c.useState(),{isLoading:s,error:t,sendRequest:a,clearError:i}=g(),o=c.useContext(h).userClassIds;return c.useEffect(()=>{(async()=>{const m="https://ppg-academic-system-06d5f9396d18.herokuapp.com/api/classes/get-by-ids",x=JSON.stringify({classIds:o});console.log("fetching classes this teacher enrolled...");try{const l=await a(m,"POST",x,{"Content-Type":"application/json"});n(l),console.log("fetching classes complete..."),console.log(l)}catch{}})()},[a]),e.jsxs("div",{children:[!r&&s&&e.jsx("div",{className:"flex justify-center mt-16",children:e.jsx(u,{size:32})}),t&&e.jsx(b,{className:"mx-4 mt-12",children:e.jsx("p",{children:"Belum terdaftar di kelas manapun!"})}),r&&e.jsx(v,{data:r})]})};export{E as default};
