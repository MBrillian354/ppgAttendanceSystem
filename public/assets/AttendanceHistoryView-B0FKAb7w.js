import{j as s,b as o,r as c,A as h,L as u}from"./index-DjI7ZG_S.js";import{u as g}from"./http-hook-D44mLOTF.js";import{L as p,C as j,a as f}from"./lock-C4-G7AWJ.js";import{G as N}from"./graduation-cap-CvjTlrcH.js";import{U as y}from"./users-Cin6MBFW.js";import{I as b}from"./InfoCard-4PesH3Ea.js";import"./createLucideIcon-CnKyH5OX.js";const v=({data:r})=>{const n=e=>{const[t,a]=e.split(":");return new Date(0,0,0,t,a).toLocaleTimeString("id-ID",{hour:"numeric",minute:"numeric",hour12:!1})};return s.jsx("div",{className:"p-4 bg-gray-50 min-h-screen",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.classes.map(e=>{var a,i;if((i=(a=e==null?void 0:e.teachingGroupYearId)==null?void 0:a.academicYearId)==null?void 0:i.isActive)return s.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 hover:border-gray-300 transition-all duration-200 overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-100",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:e.name}),e.isLocked&&s.jsx("span",{className:"inline-flex items-center p-2 rounded-full text-xs font-medium bg-green-200 text-green-700",children:s.jsx(p,{size:16})})]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(j,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{className:"text-sm",children:["Mulai Kelas ",n(e.startTime)]})]}),s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(N,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{className:"text-sm",children:[e.teachers.length," Guru"]})]}),s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(y,{className:"w-4 h-4 mr-2"}),s.jsxs("span",{className:"text-sm",children:[e.students.length," Siswa"]})]}),s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(f,{className:"w-4 h-4 mr-2"}),s.jsx("span",{className:"text-sm",children:`${e.attendances.length/e.students.length} / (targer semester) Pertemuan Terlaksana`})]})]}),s.jsx("div",{className:"p-4 border-t border-gray-100",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(o,{to:`/dashboard/classes/${e._id}`,className:"grow",children:s.jsx("button",{className:"btn-mobile-primary-round w-full",children:"Detail Kelas"})}),s.jsx(o,{to:`/attendance/history/class/${e._id}`,className:"grow",children:s.jsx("button",{className:"btn-mobile-primary-round w-full",children:"Riwayat Absensi"})})]})})]},e._id)})})})})},E=()=>{const[r,n]=c.useState(),{isLoading:e,error:t,sendRequest:a,clearError:i}=g(),d=c.useContext(h).userClassIds;return c.useEffect(()=>{(async()=>{const m="http://localhost:5000/api/classes/get-by-ids",x=JSON.stringify({classIds:d});console.log("fetching classes this teacher enrolled...");try{const l=await a(m,"POST",x,{"Content-Type":"application/json"});n(l),console.log("fetching classes complete..."),console.log(l)}catch{}})()},[a]),s.jsxs("div",{children:[!r&&e&&s.jsx("div",{className:"flex justify-center mt-16",children:s.jsx(u,{size:32})}),t&&s.jsx(b,{className:"mx-4 mt-12",children:s.jsx("p",{children:"Belum terdaftar di kelas manapun!"})}),r&&s.jsx(v,{data:r})]})};export{E as default};
